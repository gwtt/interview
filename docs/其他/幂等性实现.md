### 什么是幂等性

> **计算机学中**：幂等指多次操作产生的影响只会跟一次执行的结果相同。
>
> 就是重复执行不会对系统产生影响

### 为什么要使用幂等性

> 1.用户重复下单
>
> 2.用户重复消费
>
> 3.抽奖活动
>
> 4.重复提交表单
>
> 上述都会如果不幂等，会对系统造成很大的影响

### 如何实现幂等性

> #### 唯一主键索引实现幂等性
>
> 利用主键的唯一来控制多次insert的幂等
>
> #### 乐观锁实现幂等性
>
> 利用版本号来更新数据，每次更改数据前查看版本号是否一致
>
> #### Token 令牌实现幂等性（可以加redis）
>
> 请求时带上token，然后后端去过滤掉重复的请求。redis存上token，请求前去查询有没有这个token，然后用完就删掉，这样后续同样token请求没有用。
>
> ### PRG模式(Post,redirect,get)
>
> 提交后页面重定向，防止用户f5刷新重新提交
>
> ### 分布式锁
>
> 和唯一主键差不多，解决分布式系统幂等性