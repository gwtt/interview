### Redis的数据一致性如何实现

> **方式1：先更新数据库，再更新缓存**
>
> 这种是常规的做法，但是如果更新缓存失败，将会导致缓存是旧数据，数据库是新数据
>
> **方式2：先删除缓存，再写入数据库**
>
> 这种方式能够解决方式1的问题，但是仅限于低并发的场景，不然如果有新的请求在删完缓存之后，写数据库之前进来，那么缓存就会马上更新数据库更新之前数据，造成数据不一致的问题
>
> **方式3：延时双删策略**
>
> 这种方式是先删除缓存，然后更新数据库，最后延迟个几百毫秒再删除缓存
>
> **方式4：直接操作缓存，定期写入数据库**



### Redis的缓存更新

> 1. 数据**实时同步失效或更新**。这是一种增量主动型的方案，能保证数据强一致性，在数据库数据更新之后，主动请求缓存更新
> 2. 数据**异步更新**。这是一种增量被动型方案，数据一致性稍弱，数据更新会有延迟，更新数据库数据后，通过异步方式，用多线程方式或消息队列来实现更新
> 3. **定时任务更新**。这是一种增/全量被动型方案，通过定时任务按一定频率调度更新，数据一致性最差