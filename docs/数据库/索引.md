### 什么是索引

> 索引是对数据库表中一列或多列的值进行排序的一种结构，使用索引可快速访问数据库表中的特定信息.



### MySQL有哪些索引？

> 主键索引、唯一索引、普通索引、全文索引、联合索引



### mysql索引实现原理，为什么b+树?

> mysql索引底层的数据结构是b+树
>
> b+树的特点就是
>
> - 节点排序，一个节点了可以存放多个元素，多个元素也排序了
> - 叶子节点之间有指针
> - 非叶子节点上的元素在叶子节点上都冗余了，也就是叶子节点中存储了所有的元素，并且排好顺序
>
> 首先节点排序有利于加快对元素的查找
>
> 一个节点存放多个元素，使树高度不会很高，磁盘IO次数更少
>
> 因为叶子节点上有下一个数据区的指针，数据形成了链表，范围查询和排序能力更强
>
> 效率稳定，因为都是在叶子节点上拿到数据。



### 哪些情况下不会运用索引？

> - 首先，你**不查这个数据段**那肯定没必要用索引
> - **表是经常更新的**，也不适合用索引，频繁更新数据会导致索引更新
> - **数据量少**的表不要使用索引，改善不大。
> - 字段不在**where语句**出现时不要添加索引。
> - **数据唯一性差**的字段不要使用索引，比如性别，只有两种可能，用索引无异于全表扫描



### 如果字段数有一百个，怎么加索引

> 首先我们要判断哪些字段需要建立索引。
>
> 比如经常与其他表进行连接的表，**在连接字段上应该建立索引**；
>
> 然后**经常出现在Where子句中的字段**，特别是大表的字段，应该建立索引；
>
> 索引应该建在选择性高的字段上；索引应该**建在小字段上**，对于大的文本字段甚至超长字段，不要建索引；



### 全文索引

> 首先字段长度过短时，全文索引是失效的，详情看【**show variables like '%ft%';** 查看全文索引的信息】，
>
> ```sql
> select * from people where match(name) against('aaa*' in boolean mode);如果没有in boolean mode这段，默认是等值查询
> ```
>



### 全文索引原理

> 原理都是倒排索引。
>
> 简单来说，就是一般情况下，我们是根据根据文档的id去获取文档，而倒排索引则是根据文档单词去获取文档对应的位置。



### 索引什么时候失效

> - 最左前缀法则 : 如果是联合索引,查询从索引的最左侧开始,不跳过其他索引. 如果跳过,则索引失效
> - 使用范围查询时,范围查询条件的右侧的列的索引失效.
> - 如果使用运算的话,则索引失效;
> - 字符串不加单引号则索引失效.
> - 覆盖索引: 只访问索引的查询
> - or查询则索引失效.
> - like 模糊查询加前置%则索引失效
> - in , not in     in有效, not in 失效
