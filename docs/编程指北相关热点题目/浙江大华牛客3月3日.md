一面（电话20min）

1. 自我介绍。

2. 实习经历介绍，很随意没有问具体项目。

3. java有哪些线程同步的map，这些map的优缺点介绍。

   > **ConcurrentHashMap**,**Hashtable**,**Collections.synchronizedMap**
   >
   > ConcurrentHashMap锁的粒度小，并不是将每个方法都上锁，而是锁链表的头节点，效率更高。
   >
   > Hashtable，就是在hashmap方法上上了**synchronized** 关键字，所有效率比较低，一旦有线程尝试读写数据，其余线程都被阻塞。
   >
   > Collections.synchronizedMap,不懂算不算，是将普通map进行包装，跟hashtable差不多

4. sleep()和wait的区别。

   > 都是让线程进入阻塞状态
   >
   > sleep是thread静态方法,wait是object方法
   >
   > sleep不释放锁，wait释放锁
   >
   > sleep要指定休眠时间，wait要通过notify方法唤醒。

5. Integer如何与int比较。

   > 会直接比较值，Integer会自动拆箱位int

6. int的最大值。

   > 2^31-1,一共32位，第一位为符号位

7. 如何创建一个线程池，线程池参数有哪些。

   > 新建一个ThreadPoolExecutor类来建立。
   >
   > 参数包括:核心线程数、最大线程数、空闲时间、时间单位、工作队列、线程工厂、拒绝策略	

8. 介绍乐观锁和悲观锁。

   > 乐观锁就是认为操作数据时假设不会发生冲突，就不会上锁，而是在更新数据时检查是否被更新过，主要通过版本号来实现。
   >
   > 悲观锁就是认为操作数据时其他事物肯定会改，所以每次都上锁，防止其余事物更改数据。	

9. 项目中zookeeper有什么作用。   

   > 主要当注册中心

10. 分布式锁有哪些实现方式。

    > 可以用redis的setnx实现，或者用Lua脚本，但是lua脚本在redis主从同步时不具有原子性。但是因为上锁，要记录过期时间，万一上完锁，系统宕机，会失效。Redisson就提供了一个自动续期的方案，能恰好的避免锁过期太晚或太早。
    >
    > 使用消息队列来实现锁。客户端发送一个请求消息到队列，然后监听一个响应消息。当一个客户端处理完任务后，它会发送一个释放锁的消息到队列，下一个等待的客户端可以继续处理。

11. rpc、netty提问。             

12. 项目中如何使用消息队列的，还用过哪些消息队列。

    > 主要在订单业务那边用消息队列。主要就RocketMQ用的最多，Kafka这些听说过。

13. 如何同步mysql里的内容到ElasticSearch。

    > 异步双写，比如说分为商品服务和搜索服务。比如说商品服务可以写入MySql和MQ，然后搜索服务订阅MQ，之后再由搜索服务写入ES

14. 如何实现热门文章推荐。

    > 

15. mysql存储引擎介绍，比较innodb和MyISAM。

    > 主要就是Memory、InnoDB和MyISAM，CSV这些。
    >
    > - InnoDB 支持**行级别的锁粒度**，MyISAM 不支持，只支持**表级别的锁粒度**。
    > - MyISAM **不提供事务支持**。InnoDB **提供事务支持**，实现了 SQL 标准定义了四个隔离级别。
    > - MyISAM **不支持外键**，而 InnoDB 支持。
    > - MyISAM **不支持 MVCC**，而 InnoDB 支持。
    > - 虽然 MyISAM 引擎和 InnoDB 引擎都是使用 B+Tree 作为索引结构，但是两者的实现方式不太一样。
    > - MyISAM 不支持数据库异常崩溃后的安全恢复，而 InnoDB 支持。
    > - InnoDB 的性能比 MyISAM 更强大。

16. innodb索引如何实现，什么是聚簇索引和非聚簇索引。

    > 用B+树实现的，聚簇索引的叶子节点存放了就是索引和数据，非聚簇索引的叶节点只存放数据主键和索引。

17. b树和b+树的比较，非叶子节点能否有数据。

    > b+树对比b树，
    >
    > 多了叶子节点通过指针相连，方便了范围查询，
    >
    > 然后非叶子节点不存放数据，只存放索引。
    >
    > 冗余索引，叶子节点上存放了非叶子节点有的索引数据

18. mybatis plus和mybatis的区别。

    > MyBatis是一个半自动的ORM（对象关系映射）框架，用XML和注解去把SQL与Java对象关联起来。
    >
    > MyBatisPlus对MyBatis做了增强，只需要实现BaseMapper接口，再用对应的条件构造器，即可进行增删改查，包括分页功能都提供好了。

19. nacos底层介绍。

    > nacos本身就是一个基于springboot的大型Web服务应用

20. JVM运行时数据区介绍。

    > 包括堆、方法区、虚拟机栈、本地方法栈、程序计数器
    >
    > 堆:主要用来存放系统创建的对象和数组
    >
    > 方法区:主要用来保存类的一些结构信息
    >
    > 虚拟机栈:由一系列栈帧组成，每个栈帧参与了一次方法的调用，栈帧里面有局部变量表、操作数栈等
    >
    > 本地方法栈:支持native本地方法
    >
    > 程序计数器:存储下一次指令的地址

21. Sring s = "ab" 和 String s = new String("abc")的区别。、

    > 第一个会先去字符串常量池找相同的字符串，没有再创建字符串到常量池里面。
    >
    > 第二个每次都会在堆上创建一个新的字符串对象

22. java中有哪些计数的方式。   

23. volatile作用。

    > 防止指令重排，保持变量内存可见性,保证其他线程看到变量的最新值

24. 你在技术方面有什么优势。

    > 比较擅长快速上手新技术，也能够很好的将思想对比。

25. 对docker的了解

    > 用了虚拟容器化技术，可以让一个容器就是小型Linux系统，共享主机操作系统。只需要拉取合适的镜像，即可在一个容器里部署一个项目。运用DockerFile文件，更是可以一键部署多个容器项目。

26. 对部门业务的了解。

二面（电话8min）

1. 自我介绍。

2. 实习项目介绍，如何压测。

   > 压测的话，网上说业界一般用jmeter，我用apifox比较多，功能也比较集全了，可以一秒起多个线程，然后去请求对应的接口，可以观察到请求情况。

3. Redis中SDS和c中char数组的区别。

   > SDS简单动态字符串，比char数组多了两个字段，一个len,一个free字段。然后还有一个标记数组。
   >
   > 包含了动态扩容功能，二进制安全，也提供了各种字符串功能API

4. 反问。